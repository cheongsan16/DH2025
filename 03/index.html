<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>'나우 유 씨 미 3' 감성 분석 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Warm Neutrals (Stone, Amber, Emerald, Sky, Red) -->
    <!-- Application Structure Plan: 
      보고서의 선형 구조 대신 탭 기반의 대시보드 구조를 선택했습니다. 
      1) '종합 대시보드': 사용자가 앱을 열자마자 핵심 요약(평균 평점, 감성 분포 차트, 긍/부정 요인)을 즉시 파악할 수 있도록 설계되었습니다. 
      2) '키워드 분석': 빈도수 차트와 상세 분석을 별도 탭으로 분리하여 심층 분석을 원하는 사용자의 요구를 충족합니다. 
      3) '전체 리뷰 보기': 원본 데이터를 직접 탐색하고 싶은 사용자를 위해 강력한 필터 및 검색 기능을 제공합니다. 
      이러한 비선형적 정보 아키텍처는 사용자가 자신의 관심사에 따라 정보를 능동적으로 탐색할 수 있게 하여, 단순한 보고서 읽기보다 뛰어난 사용자 경험과 이해도를 제공합니다.
    -->
    <!-- Visualization & Content Choices:
      - (Sec 2) 감성 분포: [목표: 비율 정보] -> [시각화: 도넛 차트] -> [상호작용: 호버 시 툴팁] -> [근거: 42/36/22%의 호불호 비율을 즉각적으로 전달] -> [라이브러리: Chart.js Canvas]
      - (Sec 2) 평균 평점: [목표: 핵심 지표 정보] -> [시각화: KPI 카드] -> [상호작용: 없음] -> [근거: 가장 중요한 요약 수치를 강조] -> [라이브러리: HTML/Tailwind]
      - (Sec 4) 키워드 빈도: [목표: 빈도 비교] -> [시각화: 수평 바 차트] -> [상호작용: 호버 시 툴팁] -> [근거: 키워드 간 상대적 중요도를 시각적으로 쉽게 비교] -> [라이브러리: Chart.js Canvas]
      - (Sec 3) 정성적 요인: [목표: 긍/부정 요인 정리] -> [시각화: 2열 카드 레이아웃] -> [상호작용: 없음] -> [근거: 긍정 요인과 부정 요인을 나란히 비교하며 '호불호'의 원인을 명확히 제시] -> [라이브러리: HTML/Tailwind]
      - (Appendix) 전체 리뷰: [목표: 원본 데이터 탐색] -> [시각화: 동적 테이블] -> [상호작용: 감성별 필터링, 텍스트 검색] -> [근거: 사용자가 직접 데이터를 드릴다운하고 가설을 검증할 수 있는 핵심 기능] -> [라이브러리: Vanilla JS + HTML/Tailwind]
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        .chart-container-donut {
            max-width: 400px;
            height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container-donut {
                height: 350px;
            }
        }
        .chart-container-bar {
            max-width: 600px;
            height: 400px;
        }
        .nav-btn {
            @apply px-4 py-2 text-sm sm:text-base font-medium rounded-lg transition-colors duration-200;
        }
        .nav-btn.active {
            @apply bg-red-600 text-white shadow-md;
        }
        .nav-btn.inactive {
            @apply text-stone-600 hover:bg-stone-200;
        }
        .kpi-card {
            @apply bg-white p-6 rounded-lg shadow-lg text-center;
        }
        .kpi-value {
            @apply text-4xl font-bold text-amber-700;
        }
        .kpi-label {
            @apply text-sm font-medium text-stone-500 mt-1;
        }
        /* .star-rating {
            color: #f59e0b;
        } */
    </style>
</head>
<body class="bg-stone-100 text-stone-900 antialiased">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-center text-stone-800">
                '나우 유 씨 미 3' 감성 분석 대시보드
            </h1>
            <p class="text-center text-stone-600 mt-2">
                네이버 영화 감상평 50개 기반 (2025.11.17. ~ 2025.11.18.)
            </p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-8" id="main-nav">
            <button class="nav-btn active" data-tab="dashboard">
                <span class="text-xl">📊</span> 종합 대시보드
            </button>
            <button class="nav-btn inactive" data-tab="keywords">
                <span class="text-xl">🔑</span> 키워드 분석
            </button>
            <button class="nav-btn inactive" data-tab="reviews">
                <span class="text-xl">💬</span> 전체 리뷰 보기
            </button>
            <a href="topic.html" class="nav-btn inactive !text-red-600 hover:!bg-red-100 font-medium">
                <span class="text-xl">🧠</span> 토픽 모델링 분석
            </a>
        </nav>

        <main>
            <section id="dashboard-content" class="tab-content">
                <p class="text-base text-stone-700 mb-6 max-w-3xl mx-auto text-center bg-white p-4 rounded-lg shadow-sm">
                    이 대시보드는 '나우 유 씨 미 3'에 대한 네이버 영화 감상평 50개의 감성 분석 결과를 요약합니다. 전반적인 관람객 반응, 긍정 및 부정 핵심 요인을 한눈에 파악할 수 있습니다.
                </p>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="lg:col-span-1 space-y-6">
                        <div class="kpi-card">
                            <div class="flex justify-center items-center gap-3">
                                <div class="flex items-center gap-2">
                                    <span class="text-5xl text-amber-500">★</span>
                                    <span class="kpi-value !text-6xl" id="average-score">6.54</span>
                                </div>
                                <div class="text-left">
                                    <p class="kpi-label !text-lg !font-semibold !text-stone-700 !mt-0">전체 평균 별점</p>
                                    <p class="kpi-label !mt-0">(10점 만점)</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-bold text-stone-800 mb-4 text-center">감성 분포</h2>
                            <div class="chart-container chart-container-donut">
                                <canvas id="sentimentDonutChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-2 space-y-6">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <div class="kpi-card sm:col-span-1">
                                <span class="kpi-value" id="total-reviews">50</span>
                                <p class="kpi-label">분석 리뷰 수</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h2 class="text-xl font-bold text-stone-800 mb-3">한눈에 보는 총평</h2>
                            <p class="text-stone-700">
                                '나우 유 씨 미 3'에 대한 초기 관람객 반응은 <span class="font-bold text-amber-700">"기대와 실망이 극명하게 엇갈리는 강한 호불호"</span>로 요약됩니다. 9년 만의 속편에 대한 반가움이 긍정적 요인이었으나, "세대교체" 시도와 기존 캐릭터 비중 축소에 대한 강력한 반감이 부정적 평가의 핵심 원인이 되었습니다.
                            </p>
                        </div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold text-stone-800 mb-6 text-center">주요 감성 포인트</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-emerald-500">
                        <h3 class="text-xl font-bold text-emerald-700 mb-4">👍 긍정적 감성 (Positive)</h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-bold text-stone-800">1. "반가움"과 "추억" (9년 만의 귀환)</h4>
                                <p class="text-stone-700 text-sm">오랜만에 돌아온 시리즈와 원년 멤버들을 다시 볼 수 있다는 것 자체에 높은 점수를 주는 경향이 강했습니다.</p>
                                <p class="text-stone-600 text-xs mt-1 italic">"오랜만의 호스맨 좋았어요", "다시 모인 호스맨들"</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-stone-800">2. "볼거리"와 "오락성" (시리즈의 강점)</h4>
                                <p class="text-stone-700 text-sm">스토리와는 별개로 마술 쇼와 화려한 볼거리에 만족감을 표했으며, "킬링타임용"으로 적합하다는 평가가 많았습니다.</p>
                                <p class="text-stone-600 text-xs mt-1 italic">"보는 내내 즐거운 작품", "볼거리는 확실하네요", "킬링타임용"</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-red-500">
                        <h3 class="text-xl font-bold text-red-700 mb-4">👎 부정적 감성 (Negative)</h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-bold text-stone-800">1. "세대교체"에 대한 강한 반감 (핵심 불만)</h4>
                                <p class="text-stone-700 text-sm">기존 '호스맨' 팬들은 원년 멤버들의 활약을 기대했으나, 신규 캐릭터들이 중심이 되고 기존 멤버들이 들러리가 되는 듯한 전개에 큰 배신감과 불만을 표출했습니다.</p>
                                <p class="text-stone-600 text-xs mt-1 italic">"호스맨을 들러리로", "기존캐 하대", "어줍잖은 세대교체"</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-stone-800">2. 전작 대비 "약해진 스케일"과 "허술함"</h4>
                                <p class="text-stone-700 text-sm">1, 2편에 비해 마술 트릭의 규모가 작아지고 연출이 촌스러워졌다는 비판이 제기되었습니다.</p>
                                <p class="text-stone-600 text-xs mt-1 italic">"트릭도 약해졌고", "1편이 제일 낫고", "올드하고 촌스러운 연출"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="keywords-content" class="tab-content hidden">
                <p class="text-base text-stone-700 mb-6 max-w-3xl mx-auto text-center bg-white p-4 rounded-lg shadow-sm">
                    여기서는 리뷰에서 가장 자주 언급된 키워드와 그 맥락을 분석합니다. 차트를 통해 주요 주제의 빈도를 확인하고, 텍스트 분석을 통해 관객의 관심이 어디에 집중되었는지 심층적으로 이해할 수 있습니다.
                </p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-bold text-stone-800 mb-4 text-center">주요 키워드 빈도</h2>
                        <div class="chart-container chart-container-bar">
                            <canvas id="keywordBarChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-lg">
                        <h2 class="text-xl font-bold text-stone-800 mb-4">키워드 상세 분석</h2>
                        <div class="space-y-4 text-sm">
                            <p>
                                <span class="font-bold text-emerald-600">"재미있다/재밌다" (10회):</span> 
                                긍정 평가의 기반이지만, "재미없다" (3회)도 명확히 존재하여 호불호가 갈림을 보여줍니다.
                            </p>
                            <p>
                                <span class="font-bold text-amber-700">"1편/2편/전작" (8회):</span> 
                                전작과의 비교가 매우 활발하며, 대부분 3편이 전작에 미치지 못한다는 부정적 맥락에서 사용되었습니다.
                            </p>
                            <p>
                                <span class="font-bold text-blue-600">"호스맨" (5회):</span> 
                                관객들이 영화에서 가장 기대했던 핵심 요소임을 보여주며, 이들의 활약상에 대한 기대와 실망이 리뷰의 주를 이룹니다.
                            </p>
                            <p>
                                <span class="font-bold text-red-600">"세대교체" (3회):</span> 
                                언급 횟수는 적으나, 1~3점대의 혹평 리뷰에서만 등장하며 부정적 감성의 가장 핵심적인 원인임을 명확히 보여줍니다.
                            </p>
                            <p>
                                <span class="font-bold text-sky-600">"볼거리" (3회):</span> 
                                영화의 스케일을 평가하는 기준으로, "볼거리는 확실하다"는 긍정 평가와 "볼거리가 약해졌다"는 부정 평가가 동시에 존재합니다.
                            </p>
                            <p>
                                <span class="font-bold text-stone-600">"킬링타임용" (3회) / "볼만함" (3회):</span>
                                높은 기대치 없이 가볍게 즐기기에는 무난하다는 중립적 시각을 반영합니다.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="reviews-content" class="tab-content hidden">
                <p class="text-base text-stone-700 mb-6 max-w-3xl mx-auto text-center bg-white p-4 rounded-lg shadow-sm">
                    이 섹션에서는 분석에 사용된 50개의 원본 감상평 전체를 제공합니다. 필터와 검색 기능을 사용하여 특정 별점대의 리뷰를 확인하거나, 특정 단어가 포함된 감상평을 직접 찾아볼 수 있습니다.
                </p>

                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg mb-6">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <div class="flex-1">
                            <label for="sentiment-filter" class="block text-sm font-medium text-stone-700 mb-1">감성 필터</label>
                            <select id="sentiment-filter" class="w-full rounded-md border-stone-300 shadow-sm focus:border-amber-500 focus:ring-amber-500">
                                <option value="all">전체 보기</option>
                                <option value="positive">긍정적 (8-10점)</option>
                                <option value="neutral">중립적 (6-7점)</option>
                                <option value="negative">부정적 (1-5점)</option>
                            </select>
                        </div>
                        <div class="flex-1">
                            <label for="search-input" class="block text-sm font-medium text-stone-700 mb-1">리뷰 내용 검색</label>
                            <input type="text" id="search-input" placeholder="예: 세대교체, 호스맨, 재밌다" class="w-full rounded-md border-stone-300 shadow-sm focus:border-amber-500 focus:ring-amber-500">
                        </div>
                    </div>
                </div>

                <div class="overflow-x-auto bg-white rounded-lg shadow-lg">
                    <table class="w-full min-w-[640px] text-left text-sm">
                        <thead class="bg-stone-50 border-b border-stone-200">
                            <tr>
                                <th class="p-4 font-medium">순번</th>
                                <th class="p-4 font-medium">별점</th>
                                <th class="p-4 font-medium">사용자</th>
                                <th class="p-4 font-medium">작성일</th>
                                <th class="p-4 font-medium">감상평 내용</th>
                            </tr>
                        </thead>
                        <tbody id="reviews-table-body" class="divide-y divide-stone-200">
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const allReviews = [
                { id: 1, score: 1, user: "busa****", date: "2025.11.18. 15:37", review: "9년 만에 돌아와서 볼거리도 트릭도 약해졌고 호스맨은 무식해졌으며 젊은 애들만 활약하는 스토리 세대교체를 위한거 같은데 정도가 있지 완전 호스맨을 들러리로 만들어 버리는게 말이 되냐 난 호스맨이 활약하는걸 보고 싶었다고" },
                { id: 2, score: 9, user: "shin****", date: "2025.11.18. 15:35", review: "보는 내내 즐거운 작품배우들의 케미가 좋아요" },
                { id: 3, score: 8, user: "cine****", date: "2025.11.18. 14:49", review: "2편 이후 9년이란 시간이 지나서인가 더 이상 그때처럼 놀랍지는 않지만 오랫만에 다시 모인 호스맨들을 극장에서 만나볼 수 있던 것 만으로도 돈과 시간이 아깝지 않았다." },
                { id: 4, score: 7, user: "tjrg****", date: "2025.11.18. 14:14", review: "기대안하고 봤는데 볼만함" },
                { id: 5, score: 8, user: "ksy2****", date: "2025.11.18. 13:04", review: "오랫만의 호스맨 좋았어요.신마술사+구마술사+복수극... 너무 많이 섞어놔서 어지러웠지만 볼거리는 확실하네요.프랑스에 있는 성은 다 무대장치겟죠. 실제 그런성이 있음 좋겠네요^^" },
                { id: 6, score: 6, user: "htwe****", date: "2025.11.18. 12:21", review: "나쁘지는 않은데 그렇다고 크게 재밌지도 않아서 조금 아쉽네요" },
                { id: 7, score: 6, user: "bles****", date: "2025.11.18. 12:20", review: "아직까지는 1편이 제일 낫고 그 다음 2편.. 3편이 재미는 제일 떨어지네요" },
                { id: 8, score: 6, user: "kine****", date: "2025.11.18. 12:20", review: "소소하네요. 2편과 대동소이합니다. 큰 재미는 없는.." },
                { id: 9, score: 10, user: "hchc****", date: "2025.11.18. 12:18", review: "킬링타임용 킬링타임용" },
                { id: 10, score: 8, user: "lost****", date: "2025.11.18. 12:17", review: "재밌게 봤어요.. 괜찮았음 좋네요" },
                { id: 11, score: 7, user: "khoj****", date: "2025.11.18. 12:16", review: "애송이 마술사들과 트릭의 스케일은 작아졌다 하지만 모두 모인 호스맨들이 반갑고 여전히 유효한 매직쇼." },
                { id: 12, score: 6, user: "snow****", date: "2025.11.18. 12:09", review: "아일라 피셔 돌아와서 좋긴한데 뭔가 참...너무 가벼워진듯한 연출...걍 그랬어요ㅠ" },
                { id: 13, score: 10, user: "miri****", date: "2025.11.18. 11:47", review: "Now You See Me: Now You Don't" },
                { id: 14, score: 9, user: "naku****", date: "2025.11.18. 11:32", review: "재미있게 잘 봤습니다." },
                { id: 15, score: 7, user: "tkda****", date: "2025.11.18. 11:03", review: "킬링타임용 같습니다." },
                { id: 16, score: 1, user: "rkvl****", date: "2025.11.18. 10:58", review: "(감상평 없음)" },
                { id: 17, score: 8, user: "ckj0****", date: "2025.11.18. 10:03", review: "그럭저럭 잘 봤습니다 잘봤어요" },
                { id: 18, score: 8, user: "lawc****", date: "2025.11.18. 09:44", review: "영화 재미있게 잘봤습니다~" },
                { id: 19, score: 8, user: "bghh****", date: "2025.11.18. 09:40", review: "마술은 신기하고 재밌었으나 1,2편을 안본 나도 기존캐를 하대하는게 불편했다" },
                { id: 20, score: 4, user: "witj****", date: "2025.11.18. 09:04", review: "원멤버들 오랜만에 봐서 반가워서 4점 나머지는 더 올려쳐 줄 수가 없...." },
                { id: 21, score: 6, user: "lsso****", date: "2025.11.18. 08:19", review: "킬링타임용으로 봤는데도 조금 아쉬운" },
                { id: 22, score: 10, user: "luck****", date: "2025.11.18. 08:12", review: "끝날 때 영화 속 사람들과 같이 박수 친 영화 다시 나우유씨미를 볼 수 있어 행복했습니다" },
                { id: 23, score: 7, user: "rpak****", date: "2025.11.18. 08:00", review: "그냥저냥 볼만한 영화 기대를크게안하고보세요" },
                { id: 24, score: 6, user: "roea****", date: "2025.11.18. 04:39", review: "전작을 안 봐서 비교는 못하겠지만 클리셰가 조금 있어도 오락영화로는 괜찮았다" },
                { id: 25, score: 6, user: "yuna****", date: "2025.11.18. 03:18", review: "1,2편과 전체적으로 흐름이 비슷함. 과거에 1,2편을 재밌게 봤던 기억이 있는데, 거의 10년이 지나고 보는 3편은 같은 그림이 반복되서인지 뭔가 좀 세련된 느낌은 아니었다. 스토리 내 반전도 뭔가 ?이었고하이라이트의 트릭도 다소 허술했다. 무엇보..." },
                { id: 26, score: 7, user: "heji****", date: "2025.11.18. 02:50", review: "세대교체 안하면 죽는 병에 걸린 할리우드" },
                { id: 27, score: 10, user: "alwn****", date: "2025.11.18. 02:40", review: "재미있게 잘 봤습니다~" },
                { id: 28, score: 6, user: "shfo****", date: "2025.11.18. 02:16", review: "짜잘짜잘하게 넣는것보단 임팩트 있는 마술씬 좀 더 챙기길" },
                { id: 29, score: 9, user: "sns1****", date: "2025.11.18. 00:12", review: "역시 재밌네 시리즈 계속해서 재밌음" },
                { id: 30, score: 5, user: "dbst****", date: "2025.11.17. 23:51", review: "이정도로 능멸한거면 4가진짜 역대급으로 재미있어야된다..내주말 내돈 내시간 어쩔겨1 2 본사람들 다 호스맨 4명 보고왓을건데 ,,이게뭐냐고" },
                { id: 31, score: 10, user: "kskm****", date: "2025.11.17. 22:58", review: "재밌었고 신기한 영화였어요!!" },
                { id: 32, score: 4, user: "jsjc****", date: "2025.11.17. 22:27", review: "올드하고 촌스러운 연출과 무빙. 어떻게 계속 속편이 나오는지 의문이다." },
                { id: 33, score: 4, user: "dhkd****", date: "2025.11.17. 22:19", review: "내가 ㅎ 뭐 잘 알지도 못하는 신삥이 데뷔 무대를 보러 간 것이 아니었는데...ㅠ 내 나우 유 씨 미 추억 돌려줘ㅠ 아마 이거 보러 간 사람들은 거의 대부분 예전 추억+우리들의 영웅 활약상 기대하며 갔을텐데.. 진짜 너무너무 아쉽다...다음편이 혹시 나..." },
                { id: 34, score: 3, user: "tjfg****", date: "2025.11.17. 22:15", review: "재미나고 신선한 마술트릭 보는맛으로 보던 영화인데....왜 갑자기 경찰을 뚜까패세요...? 분노의질주만큼 할 자신 있으신가?" },
                { id: 35, score: 3, user: "rmt9****", date: "2025.11.17. 22:09", review: "마술할 시간에 대신나온 어줍잖은 세대교체" },
                { id: 36, score: 10, user: "agga****", date: "2025.11.17. 21:19", review: "나우유씨미 시리즈는 늘 봐도 유쾌하고 눈이 즐거운 영화네요" },
                { id: 37, score: 8, user: "twic****", date: "2025.11.17. 20:42", review: "나우유씨미 잘봤습니다^^" },
                { id: 38, score: 7, user: "wwwa****", date: "2025.11.17. 19:50", review: "매력적인 시리즈의 9년만에 부활화려한 트릭과 통쾌한 복수극, 눈이 즐거운 액션기존 멤버들의 활약이 더 돋보였다면 좋았을듯" },
                { id: 39, score: 7, user: "supe****", date: "2025.11.17. 19:47", review: "괜찮은 듯 아쉬운 듯 쏘쏘" },
                { id: 40, score: 8, user: "minh****", date: "2025.11.17. 19:35", review: "나우유씨미 영화 재밌게 잘 봤어요" },
                { id: 41, score: 2, user: "nan_****", date: "2025.11.17. 18:54", review: "진짜 드럽게재미없네 공짜로 풀려도 안볼영화를 돈주고봤네 개아까워죽겟구만" },
                { id: 42, score: 2, user: "jjim****", date: "2025.11.17. 18:35", review: "이게 진짜로 재밌다고...? 미치겄네... 댓글알바를 얼마나 산거야.. 진짜 신나서 보러갔는데 너무지루하고 졸려서 등때고봤다 진짜 하...." },
                { id: 43, score: 8, user: "xmel****", date: "2025.11.17. 18:26", review: "볼 거리가 풍성해서 끝까지 재미있게 잘 봤어요. 특히 베로니카 역 로자먼드 파이크 존재감 있는 연기 인상적이었네요." },
                { id: 44, score: 8, user: "wohw****", date: "2025.11.17. 18:06", review: "영화 재미있게 잘 봤습니다" },
                { id: 45, score: 10, user: "lmhm****", date: "2025.11.17. 18:04", review: "꿀잼입니다 추천드려요" },
                { id: 46, score: 8, user: "jack****", date: "2025.11.17. 16:55", review: "재미나요 볼만 합니다." },
                { id: 47, score: 6, user: "dolt****", date: "2025.11.17. 16:41", review: "모두가 모인 걸 봤으니 그걸로 됐다." },
                { id: 48, score: 3, user: "unlu****", date: "2025.11.17. 15:50", review: "그냥 1에서 만족하자 그게 맞다" },
                { id: 49, score: 7, user: "maso****", date: "2025.11.17. 15:00", review: "포스터 4종+오티+스티+아카 다 챙김. ㅎㅎㅎ" },
                { id: 50, score: 6, user: "junz****", date: "2025.11.17. 14:58", review: "재미없어요 많이 별로예요" }
            ];

            const sentimentData = {
                positive: 21,
                neutral: 18,
                negative: 11
            };

            const keywordData = {
                labels: ["재미있다/재밌다", "1편/2편/전작", "호스맨", "아쉽다/아쉬운", "재미없다", "볼만함", "킬링타임용", "세대교체", "볼거리"],
                values: [10, 8, 5, 4, 3, 3, 3, 3, 3]
            };

            const sentimentColors = {
                positive: '#10b981',
                neutral: '#0ea5e9',
                negative: '#ef4444'
            };

            const sentimentFilter = document.getElementById('sentiment-filter');
            const searchInput = document.getElementById('search-input');
            const tableBody = document.getElementById('reviews-table-body');

            function getSentimentCategory(score) {
                if (score >= 8) return 'positive';
                if (score >= 6) return 'neutral';
                return 'negative';
            }

            function renderStars(score, colorClass) {
                const fullStars = Math.floor(score / 2);
                const halfStar = score % 2 === 1;
                let starsHtml = `<span class="${colorClass}">`;
                for (let i = 0; i < fullStars; i++) {
                    starsHtml += '★';
                }
                if (halfStar) {
                    starsHtml += '☆';
                }
                for (let i = 0; i < 5 - fullStars - (halfStar ? 1 : 0); i++) {
                    starsHtml += '☆';
                }
                starsHtml += `</span> <span class="font-bold ml-1 ${colorClass}">${score}</span>`;
                return starsHtml;
            }

            function populateTable(reviews) {
                tableBody.innerHTML = '';
                if (reviews.length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="5" class="p-4 text-center text-stone-500">일치하는 리뷰가 없습니다.</td></tr>`;
                    return;
                }
                reviews.forEach(review => {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-stone-50';
                    
                    const sentiment = getSentimentCategory(review.score);
                    let scoreColorClass = '';
                    if (sentiment === 'positive') scoreColorClass = 'text-emerald-600';
                    else if (sentiment === 'neutral') scoreColorClass = 'text-sky-600';
                    else scoreColorClass = 'text-red-600';

                    row.innerHTML = `
                        <td class="p-4">${review.id}</td>
                        <td class="p-4 whitespace-nowrap">${renderStars(review.score, scoreColorClass)}</td>
                        <td class="p-4 text-stone-700">${review.user}</td>
                        <td class="p-4 text-stone-500 whitespace-nowrap">${review.date}</td>
                        <td class="p-4 text-stone-800">${review.review}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            function filterAndSearchReviews() {
                const sentiment = sentimentFilter.value;
                const searchTerm = searchInput.value.toLowerCase();

                let filtered = allReviews.filter(review => {
                    const reviewSentiment = getSentimentCategory(review.score);
                    const sentimentMatch = (sentiment === 'all' || reviewSentiment === sentiment);
                    const searchMatch = (review.review.toLowerCase().includes(searchTerm) || review.user.toLowerCase().includes(searchTerm));
                    return sentimentMatch && searchMatch;
                });

                populateTable(filtered);
            }

            function createDonutChart() {
                const ctx = document.getElementById('sentimentDonutChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['긍정적 (8-10점)', '중립적 (6-7점)', '부정적 (1-5점)'],
                        datasets: [{
                            data: [sentimentData.positive, sentimentData.neutral, sentimentData.negative],
                            backgroundColor: [sentimentColors.positive, sentimentColors.neutral, sentimentColors.negative],
                            borderColor: '#ffffff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '60%',
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        family: "'Noto Sans KR', sans-serif"
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed) {
                                            const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                            const percentage = ((context.parsed / total) * 100).toFixed(1);
                                            label += `${context.parsed}명 (${percentage}%)`;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function createBarChart() {
                const ctx = document.getElementById('keywordBarChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: keywordData.labels,
                        datasets: [{
                            label: '언급 빈도수',
                            data: keywordData.values,
                            backgroundColor: '#d97706',
                            borderColor: '#b45309',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return ` ${context.parsed.x}회 언급`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: '언급 횟수'
                                }
                            }
                        }
                    }
                });
            }

            function setupNavigation() {
                const nav = document.getElementById('main-nav');
                const tabs = nav.querySelectorAll('.nav-btn');
                const contents = document.querySelectorAll('.tab-content');

                nav.addEventListener('click', (e) => {
                    const button = e.target.closest('button');
                    if (!button) return;

                    const tabId = button.dataset.tab;
                    
                    tabs.forEach(tab => {
                        tab.classList.remove('active');
                        tab.classList.add('inactive');
                    });
                    button.classList.add('active');
                    button.classList.remove('inactive');
                    
                    contents.forEach(content => {
                        if (content.id === `${tabId}-content`) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            }

            createDonutChart();
            createBarChart();
            populateTable(allReviews);
            setupNavigation();

            sentimentFilter.addEventListener('input', filterAndSearchReviews);
            searchInput.addEventListener('input', filterAndSearchReviews);
        });
    </script>
</body>
</html>
